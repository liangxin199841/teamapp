(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9c07226"],{"14b6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step1"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"发布名称",prop:"name"}},[i("el-input",{attrs:{size:"large",placeholder:"请输入..."},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),i("el-form-item",{attrs:{label:"发布分类",prop:"fenLei"}},[i("el-row",{staticStyle:{height:"35px"},attrs:{type:"flex",align:"middle"}},[i("el-col",{attrs:{span:3}},[i("div",{staticClass:"el-form-item__label",staticStyle:{"padding-bottom":"0"}},[e._v(" 发布分类")])]),i("el-col",{attrs:{span:2}},[i("el-button",{staticStyle:{margin:"0",padding:"0"},attrs:{type:"text"},nativeOn:{click:function(t){e.dialogFormFenLeiVisible=!0}}},[e._v("设置")])],1)],1),i("el-radio-group",{model:{value:e.ruleForm.fenLei,callback:function(t){e.$set(e.ruleForm,"fenLei",t)},expression:"ruleForm.fenLei"}},e._l(e.ruleForm.fenLeis,(function(e){return i("el-radio",{key:e.id,attrs:{label:e.name}})})),1)],1),i("el-form-item",{attrs:{label:"发布标签",required:""}},[e._l(e.ruleForm.tags,(function(t){return i("el-tag",{key:t.id,attrs:{closable:!0,type:"primary"},on:{close:function(i){return e.handleClose(t)}}},[e._v(" "+e._s(t.name)+" ")])})),i("el-button",{staticStyle:{"vertical-align":"middle"},attrs:{icon:"plus",size:"large"},nativeOn:{click:function(t){return e.showDialog(t)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.tagsValid,expression:"tagsValid"}],staticClass:"el-form-item__error"},[e._v(e._s(e.tagsError))])])],2),i("el-form-item",{staticStyle:{width:"750px"},attrs:{label:"发布时间",required:""}},[i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"activeStartTimeDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"活动开始日期"},model:{value:e.ruleForm.activeStartTimeDate,callback:function(t){e.$set(e.ruleForm,"activeStartTimeDate",t)},expression:"ruleForm.activeStartTimeDate"}})],1)],1),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"activeStartTimeTime"}},[i("el-time-select",{attrs:{placeholder:"请选择时间点","picker-options":{start:"00:00",step:"00:15",end:"23:45"}},model:{value:e.ruleForm.activeStartTimeTime,callback:function(t){e.$set(e.ruleForm,"activeStartTimeTime",t)},expression:"ruleForm.activeStartTimeTime"}})],1)],1),i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("—")]),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"activeEndTimeDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"活动结束日期"},model:{value:e.ruleForm.activeEndTimeDate,callback:function(t){e.$set(e.ruleForm,"activeEndTimeDate",t)},expression:"ruleForm.activeEndTimeDate"}})],1)],1),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"activeEndTimeTime"}},[i("el-time-select",{attrs:{placeholder:"请选择时间点","picker-options":{start:"00:00",step:"00:15",end:"23:45"}},model:{value:e.ruleForm.activeEndTimeTime,callback:function(t){e.$set(e.ruleForm,"activeEndTimeTime",t)},expression:"ruleForm.activeEndTimeTime"}})],1)],1)],1),i("el-form-item",{attrs:{label:"活动地点",required:""}},[i("AddressSelect",{attrs:{province:e.ruleForm.province,id:"address",city:e.ruleForm.city,detail:e.ruleForm.detail,isAddressTrue:e.isAddressTrue}})],1),i("el-form-item",{attrs:{label:"活动人数"}},[i("el-radio",{staticClass:"radio",attrs:{label:"无限制"},model:{value:e.ruleForm.activePerson,callback:function(t){e.$set(e.ruleForm,"activePerson",t)},expression:"ruleForm.activePerson"}},[e._v("无限制")]),i("el-radio",{staticClass:"radio",attrs:{label:"限制"},model:{value:e.ruleForm.activePerson,callback:function(t){e.$set(e.ruleForm,"activePerson",t)},expression:"ruleForm.activePerson"}},[e._v("限制")]),i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"0",number:!0,size:"large",disabled:"无限制"==e.ruleForm.activePerson},model:{value:e.ruleForm.activePersonNum,callback:function(t){e.$set(e.ruleForm,"activePersonNum",t)},expression:"ruleForm.activePersonNum"}},[i("template",{slot:"append"},[e._v("人")])],2)],1),i("el-form-item",{attrs:{label:"活动封面"}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-dragger__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过2M")])])],1),i("el-form-item",{attrs:{label:"活动简介"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:4,maxRows:8}},model:{value:e.ruleForm.activeDescribe,callback:function(t){e.$set(e.ruleForm,"activeDescribe",t)},expression:"ruleForm.activeDescribe"}})],1)],1),i("el-dialog",{attrs:{title:"添加活动标签",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.dialogForm}},[i("el-form-item",[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleAdd(e.dialogForm.name,e.dialogForm,e.ruleForm.tags)}}},[e._v("添加")])],1)],1),i("el-dialog",{attrs:{title:"设置活动分类",visible:e.dialogFormFenLeiVisible},on:{"update:visible":function(t){e.dialogFormFenLeiVisible=t}}},[i("el-form",{attrs:{model:e.dialogFormFenLei}},[i("el-form-item",e._l(e.ruleForm.fenLeis,(function(t){return i("el-tag",{key:t.id,attrs:{closable:!0,type:"primary"},on:{close:function(i){return e.handleCloseFenLei(t)}}},[e._v(" "+e._s(t.name)+" ")])})),1),i("el-form-item",[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialogFormFenLei.name,callback:function(t){e.$set(e.dialogFormFenLei,"name",t)},expression:"dialogFormFenLei.name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){e.dialogFormFenLeiVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleAdd(e.dialogFormFenLei.name,e.dialogFormFenLei,e.ruleForm.fenLeis)}}},[e._v("添加")])],1)],1)],1)},r=[],l=(i("c975"),i("a434"),i("b0c0"),i("498a"),i("e085")),o=i("3d93"),s={name:"ActivePublic",components:{AddressSelect:l["default"]},data:function(){return{tagsValid:!1,tagsError:"请设置标签",isAddressTrue:!1,dialogFormVisible:!1,dialogFormFenLeiVisible:!1,dialogForm:{name:""},dialogFormFenLei:{name:""},ruleFormValid:!1,rules:{name:[{required:!0,message:"请输入活动名称",trigger:"change"}],fenLei:[{required:!0,message:"请选择活动分类",trigger:"change"}],activeStartTimeDate:[{required:!0,message:"请选择活动开始日期",trigger:"change"}],activeStartTimeTime:[{required:!0,message:"请选择活动开始时间",trigger:"change"}],activeEndTimeDate:[{required:!0,message:"请选择活动结束日期",trigger:"change"}],activeEndTimeTime:[{required:!0,message:"请选择活动结束时间",trigger:"change"}]},ruleForm:{fenLei:"",tags:[],activeStartTimeDate:"",activeStartTimeTime:"",activeEndTimeDate:"",activeEndTimeTime:"",activePerson:"",activePersonNum:"",activeDescribe:""}}},computed:{},methods:{handleReset:function(){this.$refs.ruleForm.resetFields()},showDialog:function(){this.ruleForm.tags.length>=5?this.$message({message:"最多设置5个标签",type:"warning"}):(this.dialogFormVisible=!0,this.dialogForm={})},handleClose:function(e){var t=this.ruleForm.tags.indexOf(e);this.ruleForm.tags.splice(t,1)},handleCloseFenLei:function(e){var t=this.ruleForm.fenLeis.indexOf(e);this.ruleForm.fenLeis.splice(t,1)},handleAdd:function(e,t,i){if(e&&0!==e.trim().length){var a=!1;e=e.trim();for(var r=0;r<i.length;r++)if(i[r].name===e){a=!0;break}a?this.$message({message:"该标签已存在",type:"warning"}):(this.dialogFormVisible=!1,this.dialogFormFenLeiVisible=!1,i.push({name:e}))}else this.$message({message:"标签不能为空",type:"warning"})}},mounted:function(){},created:function(){Object.assign(this.ruleForm,o["a"].state.ruleForm)},updated:function(){},beforeRouteLeave:function(e,t,i){if("/activePublic/step2"===e.path){var a=this;this.isAddressTrue=!0;var r=!1;this.tagsValid=!this.ruleForm.tags.length||r,this.$refs.ruleForm.validate((function(e){!a.tagsValid&&e?i():i(!1)}))}else i()}},n=s,m=(i("c32e"),i("2877")),c=Object(m["a"])(n,a,r,!1,null,null,null);t["default"]=c.exports},c32e:function(e,t,i){"use strict";var a=i("dd64"),r=i.n(a);r.a},dd64:function(e,t,i){}}]);
//# sourceMappingURL=chunk-b9c07226.2edaac2f.js.map